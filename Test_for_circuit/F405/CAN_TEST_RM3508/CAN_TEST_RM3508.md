# 利用RM3508测试can口正常与否

### 第一步：从电控组拿一组好的RM3508和C620电调

​					

![](pic_for_md\1.jpg)

到时候电控组会确保提供的电机和电调是可以正常运转的

### 第二步： 接线，电机接电调，电调接板子

![](pic_for_md\2.png)这是一个接线实例，箭头标注的地方就是连接处，需要稍加注意。不过一般上手接一下就知道怎么回事了，一点也不复杂。不过还是需要注意，can_H和can_L不要接反了，不然会什么数据也没有。

### 第三步：上电源看电调闪几次绿光，记住那个数值，就是电调的ID

### 第四步：烧录电控组同学提供的CAN_TEST_RM3508程序

在电脑装有keil的前提下，具体烧录程序是：点开所需工程文件，以下举例说明：点开Test_for_circuit文件夹>>>继续点进F405>>>点进CAN_TEST_RM3508工程文件>>>双击MDK-ARM>>>最后双击CAN_TEST_RM3508.uvprojx文件进入keil界面

点击左project一栏中CAR1文件的‘’+‘’（加号），因为我这个文件不是新建的，所以名字不是CAN_TEST_RM3508,但是不影响测试结果，请大家放心

然后双击main.c文件进入主函数的编辑

![](pic_for_md\3.png)



随后在第117行找到这一行命令，这里绿色框里是0x03，这就是一开始电调单位时间内闪的次数，表示是电调的ID，如果电调闪7次，把0x03改成0x07就好了

![](pic_for_md\4.png)

先默认测CAN1，然后改变接线之后，需要将代码中用于触发CAN2空闲的中断的回调函数解开注释，同时给用于触发CAN1空闲中断的回调函数上注释

<img src="pic_for_md\5.png" style="zoom:50%;" />

同时也要注意，需要将“RM3508.c”文件中的RM3508_Set_I函数中的图示语句改成测试对应Can相关的语句，测试can1的话就用上面那一条，下面一条是测试can2的时候用的，就注释掉就好了。<img src="\pic_for_md\6.png"  />



然后重新烧录程序，开始测试

